<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RemoteApplications</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style media="all" type="text/css">
body {
  background: white;
  color: black;
  font-size: small;
  font-family: sans-serif;
  padding: 0.1em 0.5em;
}
.libdoc {
  white-space: pre-wrap;
}
a.name, span.name {
  font-style: italic;
}
a, a:link, a:visited {
  color: #c30;
}
a:hover, a:active {
  text-decoration: underline;
  color: black;
}
div.shortcuts {
  margin: 1em 0em;
  font-size: 0.9em;
}
div.shortcuts a {
  text-decoration: none;
  color: black;
}
div.shortcuts a:hover {
  text-decoration: underline;
}
table.keywords {
  border: 2px solid black;
  border-collapse: collapse;
  empty-cells: show;
  margin: 0.3em 0em;
  width: 100%;
}
table.keywords th, table.keywords td {
  border: 2px solid black;
  padding: 0.2em;
  vertical-align: top;
}
table.keywords th {
  background: #bbb;
  color: black;
}
table.keywords td.kw {
  width: 150px;
  font-weight: bold;
}
table.keywords td.arg {
  width: 300px;
  font-style: italic;
}
table.doc {
  border: 1px solid black;
  background: transparent;
  border-collapse: collapse;
  empty-cells: show;
  font-size: 0.85em;
}
table.doc td {
  border: 1px solid black;
  padding: 0.1em 0.3em;
  height: 1.2em;

}
#footer {
  font-size: 0.9em;
}
</style>
<style media="print" type="text/css">
body {
  margin: 0px 1px;
  padding: 0px;
  font-size: 10px;
}
a {
  text-decoration: none;
}
</style>
</head>
<body>
<h1>RemoteApplications</h1>
<b>Scope:</b> global<br>
<b>Named arguments: </b>
not supported

<h2 id="introduction">Introduction</h2>
<div class="libdoc">RemoteApplications library is used for launching Java applications in a separate process and taking Robot Framework (RF) libraries into use to operate on them. This is useful when application does something that cannot be tested with RF when running inside the same JVM. Such cases are when System.exit is called in the SUT, when multiple applications running in separate JVMs need to be tested in parallel or when application is started using Java Web Start. RemoteApplications library is also suitable when application use embedded JVMs (meaning they use the JNI Invocation API to start the JVM), or when the startup is deeply nested in scripts.

Using RemoteApplications requires that remoteapplications.jar file is in <i>CLASSPATH</i> environment variable before starting RF test execution. RemoteApplications works with Java 1.5 and newer. Following paragraphs contain generic information about RemoteApplications library. See also keywords' documentation for more detailed information.

A Java application that can be started via command line, can be taken into use with keyword <a href="#Start Application" class="name">Start Application</a>. Such cases include starting a Java and Java Web Start processes, for example:
- java -jar myapp.jar
- jawaws <a href="http://robotframework.org/myapp.jnlp">http://robotframework.org/myapp.jnlp</a>
- myapp.exe

Otherwise the robot agent (see the chapter below) and <a href="#Application Started" class="name">Application Started</a> keyword must be used to enable the testing capabilities. Such cases include:
- starting Java Web Start application from a web page
- running application remotely

After the application is started, the needed test libraries must be taken into use. That is done using <a href="#Take Library Into Use" class="name">Take Library Into Use</a> and <a href="#Take Libraries Into Use" class="name">Take Libraries Into Use</a> keywords. After that, keywords are ready to be used. Note that the libraries needs to be taken into use separately for each application.

If multiple applications are started with RemoteApplications library, <a href="#Switch To Application" class="name">Switch To Application</a> keyword can be used to define which application is currently active. Keywords always handle the currently active application.

The application is closed using the keyword <a href="#Close Application" class="name">Close Application</a>. Even if the application is closed using some other keyword, RemoteApplications library still needs to be informed about it, using the <a href="#Close Application" class="name">Close Application</a> keyword. The <a href="#Close All Applications" class="name">Close All Applications</a> keyword can be used to close all the applications.

<b>NOTE:</b> RemoteApplications cannot be taken into use with <i>WITH NAME</i> functionality. However, there should not be a need for that as the RemoteApplications library can handle multiple applications.

<b>ROBOT AGENT</b>

Sometimes the application cannot be started locally from command line. In that case the Robot Agent needs to be used. It will start testing capabilities to the started application's JVM. Robot Agent works with Java Web Start applications and standalone java applications. It is taken into use by setting the <i>JAVA_TOOL_OPTIONS</i> environment variable with value:

<i>-javaagent:"${remoteapplications.jar}"="${testing_dependencies_dir}"[:PORT=${port}]</i>

where <i>${remoteapplications.jar}</i> is the path to the remoteapplications.jar and <i>${testing_dependencies_dir}</i> is the path to the directory containing the test library jars. The optional <i>:PORT=${port}</i> setting can be provided, where the <i>:PORT=</i> is separator, and <i>${port}</i> defines the port number where the service providing the testing capabilities is started.

Examples of the setting command:

<i>-javaagent:"remoteapplications-1.0.jar"="c:\some\testing\lib"</i>

<i>-javaagent:"~/some/testing/lib/remoteapplications-1.0.jar"="~/some/testing/lib":PORT=12345</i>

When Robot Agent is used (RemoteApplications uses it internally) and the port parameter is not given, rmi_url from where the testing capabilities can be accessed is written to file <span class="name">%HOME/.robotframework/remoteapplications/launched.txt</span> or to file <span class="name">%APPDATA%\RobotFramework\remoteapplications\launched.txt</span> on Windows. In case application is started on remote machine, this rmi_url needs to be given to <a href="#Application Started" class="name">Application Started</a> keyword. When <a href="#Application Started" class="name">Application Started</a> keyword establishes connection to the application, <span class="name">launched.txt</span> is cleared and the active connection is added to <span class="name">connected.txt</span> file (located in same directory as <span class="name">launched.txt</span>). This file is used to connect active application in case the <span class="name">connect_to_previously_launched_applications</span> argument is given when <a href="#importing" class="name">importing</a> RemoteApplications library.

<b>NOTE:</b> With Java 1.5 the testing dependencies cannot be added to the application's JVM with the Robot Agent. Therefore the test libraries need to be added to the classpath with some other means. Often it is possible to just add the needed jars to CLASSPATH environment variable. However, in case application's startup script clears the CLASSPATH or if application is started using Java Web Start, setting CLASSPATH environment variable is not enough. In such situations the test libraries need to be included into the remoteapplications.jar file's classpath. This can be achieved by updating the remoteapplications.jar file's MANIFEST.MF file with command:

<span class="name">jar ufm remoteapplications.jar manifest.txt</span>

For example, insert following line to the manifest.txt:

Class-Path: ../relative/path/to/test_library.jar path/to/another_test_library.jar

This example entry in the manifest.txt includes two test library jars to the remoteapplications.jar file's MANIFEST.MF. Paths to the test libraries have to be relative to the remoteapplications.jar and line needs to end with new line character. See more from <a href="http://java.sun.com/docs/books/tutorial/deployment/jar/downman.html">http://java.sun.com/docs/books/tutorial/deployment/jar/downman.html</a></div>

<h2 id="importing">Importing</h2>
<table border="1" class="keywords libdoc">
<tr>
  <th class="arg">Arguments</th>
  <th class="doc">Documentation</th>
</tr>
<tr>
  <td class="arg">connect_to_previously_launched_applications=</td>
  <td class="doc"><span class="name">connect_to_previously_launched_applications</span> defines whether to connect applications that were started in previous test execution. By default this feature is not in use. It can be taken into use by giving any value to library initialization like shown in below examples:

<table border="1" class="doc">
<tr>
<td>Library</td>
<td>RemoteApplications</td>
<td># Does not connect to previously started applications</td>
<td></td>
</tr>
<tr>
<td>Library</td>
<td>RemoteApplications</td>
<td>Reconnect</td>
<td># Connects to previously started applications</td>
</tr>
</table>
Setting <span class="name">connect_to_previously_launched_applications</span> fastens the test case development as you can open the application once, and after that, re-execute the test against the opened application without restarting it. Obviously, you need to disable closing the application to achieve this. Reconnecting can also be achieved by using fixed <span class="name">rmi_url</span>, either by giving <span class="name">port</span> argument to <a href="#Start Application" class="name">Start Application</a> keyword or <span class="name">rmi_url</span> to <a href="#Application Started" class="name">Application Started</a> keyword.</td>
</tr>
</table>

<h2>Shortcuts</h2>
<div class='shortcuts'>
<a href="#Application Should Be Connected" title="Checks is there connection to the active application.">Application&nbsp;Should&nbsp;Be&nbsp;Connected</a>
&nbsp;&middot;&nbsp;
<a href="#Application Should Not Be Connected" title="Checks that there is no connection to the active application.">Application&nbsp;Should&nbsp;Not&nbsp;Be&nbsp;Connected</a>
&nbsp;&middot;&nbsp;
<a href="#Application Started" title="Connects to started application and switches to it.">Application&nbsp;Started</a>
&nbsp;&middot;&nbsp;
<a href="#Close All Applications" title="Closes all the applications.">Close&nbsp;All&nbsp;Applications</a>
&nbsp;&middot;&nbsp;
<a href="#Close Application" title="Closes application.">Close&nbsp;Application</a>
&nbsp;&middot;&nbsp;
<a href="#Start Application" title="Starts the application, connects to it and makes it active application.">Start&nbsp;Application</a>
&nbsp;&middot;&nbsp;
<a href="#Switch To Application" title="Changes the application where the keywords are executed.">Switch&nbsp;To&nbsp;Application</a>
&nbsp;&middot;&nbsp;
<a href="#Take Libraries Into Use" title="Takes the libraries into use at the remote application.">Take&nbsp;Libraries&nbsp;Into&nbsp;Use</a>
&nbsp;&middot;&nbsp;
<a href="#Take Library Into Use" title="Takes given library into use.">Take&nbsp;Library&nbsp;Into&nbsp;Use</a>
</div>

<h2>Keywords</h2>
<table border="1" class="keywords libdoc">
<tr>
  <th class="kw">Keyword</th>
  <th class="arg">Arguments</th>
  <th class="doc">Documentation</th>
</tr>
<tr>
  <td class="kw"><a name="Application Should Be Connected"></a>Application Should Be Connected</td>
  <td class="arg"></td>
  <td class="doc">Checks is there connection to the active application.</td>
</tr>
<tr>
  <td class="kw"><a name="Application Should Not Be Connected"></a>Application Should Not Be Connected</td>
  <td class="arg">timeout=2 seconds</td>
  <td class="doc">Checks that there is no connection to the active application.

<span class="name">timeout</span> is time that the application is waited to be closed. Sometimes closing application takes some time and therefore it might take while before it is really closed.</td>
</tr>
<tr>
  <td class="kw"><a name="Application Started"></a>Application Started</td>
  <td class="arg">alias, timeout=60 seconds, rmi_url=None</td>
  <td class="doc">Connects to started application and switches to it.

<span class="name">alias</span> is the alias name for the application. When using multiple applications alias is used to switch between them with keyword <a href="#Switch To Application" class="name">Switch To Application</a>.

<span class="name">timeout</span> is the time to wait the application to be started to the point where the testing capabilities are initialized and the connection to application can be established.

<span class="name">rmi_url</span> is url that can be used to connect to the application. When used locally there is usually no need to give the <span class="name">rmi_url</span>. However, when the application is running on remote machine, the file based mechanism used to find the application is not enough and you need to provide the <span class="name">rmi_url</span>. Format of the <span class="name">rmi_url</span> is '<a href="rmi://host:port/robotrmiservice">rmi://host:port/robotrmiservice</a>'. See from <a href="#introduction" class="name">Introduction</a> info about Robot Agent.

To access application started in previous test run, you can set <span class="name">connect_to_previously_launched_applications</span> when <a href="#importing" class="name">Importing</a> library. If the previously started application is available, this keyword connects to it in case the 'rmi_url' is not given.

Examples:
<table border="1" class="doc">
<tr>
<td>Application Started</td>
<td>App1</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Application Started</td>
<td>App2</td>
<td>2 minutes</td>
<td><a href="rmi://localhost:7000/robotrmiservice">rmi://localhost:7000/robotrmiservice</a></td>
</tr>
</table></td>
</tr>
<tr>
  <td class="kw"><a name="Close All Applications"></a>Close All Applications</td>
  <td class="arg"></td>
  <td class="doc">Closes all the applications.</td>
</tr>
<tr>
  <td class="kw"><a name="Close Application"></a>Close Application</td>
  <td class="arg">alias=None</td>
  <td class="doc">Closes application.

If <span class="name">alias</span> is given, closes application related to the alias. Otherwise closes the active application.</td>
</tr>
<tr>
  <td class="kw"><a name="Start Application"></a>Start Application</td>
  <td class="arg">alias, command, timeout=60 seconds, lib_dir=None, port=None</td>
  <td class="doc">Starts the application, connects to it and makes it active application.

<span class="name">command</span> is the command used to start the application from the command line. It can be any command that finally starts JVM for example:

- java -jar my_application.jar
- javaws <a href="http://my.domain.fi/my_application.jnlp">http://my.domain.fi/my_application.jnlp</a>
- start_my_app.bat

<span class="name">lib_dir</span> is path to the directory containing all the test library jar files which are required for running the tests. <span class="name">lib_dir</span> is needed in case libraries are not in the CLASSPATH. When application is started using Java Web Start and Java version is 1.6 or higher, <span class="name">lib_dir</span> is mandatory. In case you are using 1.5 Java, you should package all these libraries to the <span class="name">remoteapplications.jar</span> which is set to CLASSPATH before starting the test execution.

When Java Web Start is used to start the application, there is need to allow permissions for the testing capabilities. Easiest way to do that is to add file .java.policy with following content to $HOME directory or %USERPROFILE% directory on Windows:

<i>grant { permission java.security.AllPermission; };</i>

<span class="name">port</span> defines the port in which the testing capabilities are started on the application. By default port is selected randomly from available ports.

Examples:
<table border="1" class="doc">
<tr>
<td>Start Application</td>
<td>App1</td>
<td>java -jar my_application.jar</td>
<td>30 seconds</td>
<td>\${CURDIR}${/}libs</td>
<td></td>
</tr>
<tr>
<td>Start Application</td>
<td>App2</td>
<td>my_application.exe</td>
<td></td>
<td>\${CURDIR}${/}libs</td>
<td>12345</td>
</tr>
</table>
<b>NOTE:</b> If the application is used to start other applications and those applications should be controlled with RemoteApplications, port should NOT be given.

To access application started in previous test run, you can set <span class="name">connect_to_previously_launched_applications</span> when <a href="#importing" class="name">Importing</a> library. If the application is available, this keyword connects to it and does NOT run the command for starting it.
</td>
</tr>
<tr>
  <td class="kw"><a name="Switch To Application"></a>Switch To Application</td>
  <td class="arg">alias</td>
  <td class="doc">Changes the application where the keywords are executed.

<span class="name">alias</span> is the name of the application and it have been given with the <a href="#Application Started" class="name">Application Started</a> keyword.

Example:
<table border="1" class="doc">
<tr>
<td>Switch To Application</td>
<td>App2</td>
</tr>
<tr>
<td>Do Something</td>
<td># Keyword operates App2</td>
</tr>
<tr>
<td>Switch To Application</td>
<td>App1</td>
</tr>
<tr>
<td>Do Something</td>
<td># Keyword operates App1</td>
</tr>
</table></td>
</tr>
<tr>
  <td class="kw"><a name="Take Libraries Into Use"></a>Take Libraries Into Use</td>
  <td class="arg">*library_names</td>
  <td class="doc">Takes the libraries into use at the remote application.

<span class="name">library_names</span> contains all the libraries that you want to take into use on the remote side. <b>NOTE:</b> See 'Start Application' for information how to provide library jar files.

Example:
<table border="1" class="doc">
<tr>
<td>Start Application</td>
<td>App1</td>
<td>java -jar my_application.jar</td>
<td>2 min</td>
<td>\${CURDIR}${/}libs</td>
</tr>
<tr>
<td>Take Libraries Into Use</td>
<td>MyLibrary</td>
<td>SwingLibrary</td>
<td></td>
<td></td>
</tr>
</table></td>
</tr>
<tr>
  <td class="kw"><a name="Take Library Into Use"></a>Take Library Into Use</td>
  <td class="arg">library_name</td>
  <td class="doc">Takes given library into use.

See <a href="#Take Libraries Into Use" class="name">Take Libraries Into Use</a> keyword for more details.
</td>
</tr>
</table>
<p id="footer">
Altogether 9 keywords.<br />
Generated by <a href="http://code.google.com/p/robotframework/wiki/LibraryDocumentationTool">libdoc.py</a>
on 2011-09-08 11:07:57.
</p>
</body>
</html>
